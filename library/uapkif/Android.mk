LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE := uapkic_prebuilt
#LOCAL_SRC_FILES := ../../uapkic/android/libs/$(TARGET_ARCH_ABI)/libuapkic.so
LOCAL_SRC_FILES := ../uapkic/libs/$(TARGET_ARCH_ABI)/libuapkic.so
LOCAL_EXPORT_C_INCLUDES := ../../uapkic/include
include $(PREBUILT_SHARED_LIBRARY)

DIR_ROOT := ../../uapkif
DIR_SRC := $(DIR_ROOT)/src
DIR_SRC_ASN1 := $(DIR_SRC)/asn1
DIR_SRC_STRUCT := $(DIR_SRC)/struct

include $(CLEAR_VARS)
LOCAL_MODULE := uapkif
LOCAL_CFLAGS := -DUAPKIF_LIBRARY
LOCAL_SHARED_LIBRARIES := uapkic_prebuilt
LOCAL_SHORT_COMMANDS := true

LOCAL_C_INCLUDES += \
	$(DIR_ROOT)/include \
	$(DIR_ROOT)/../uapkic/include \
	$(DIR_ROOT)/../uapkic/src \
	$(DIR_SRC) \
	$(DIR_SRC_ASN1)

SRC_ASN1_FILES := \
	$(DIR_SRC_ASN1)/ANY.c \
	$(DIR_SRC_ASN1)/asn1-utils.c \
	$(DIR_SRC_ASN1)/asn_codecs_prim.c \
	$(DIR_SRC_ASN1)/asn_SEQUENCE_OF.c \
	$(DIR_SRC_ASN1)/asn_SET_OF.c \
	$(DIR_SRC_ASN1)/ber_decoder.c \
	$(DIR_SRC_ASN1)/ber_tlv_length.c \
	$(DIR_SRC_ASN1)/ber_tlv_tag.c \
	$(DIR_SRC_ASN1)/BIT_STRING.c \
	$(DIR_SRC_ASN1)/BMPString.c \
	$(DIR_SRC_ASN1)/BOOLEAN.c \
	$(DIR_SRC_ASN1)/constraints.c \
	$(DIR_SRC_ASN1)/constr_CHOICE.c \
	$(DIR_SRC_ASN1)/constr_SEQUENCE.c \
	$(DIR_SRC_ASN1)/constr_SEQUENCE_OF.c \
	$(DIR_SRC_ASN1)/constr_SET.c \
	$(DIR_SRC_ASN1)/constr_SET_OF.c \
	$(DIR_SRC_ASN1)/constr_TYPE.c \
	$(DIR_SRC_ASN1)/der_encoder.c \
	$(DIR_SRC_ASN1)/ENUMERATED.c \
	$(DIR_SRC_ASN1)/GeneralizedTime.c \
	$(DIR_SRC_ASN1)/GeneralString.c \
	$(DIR_SRC_ASN1)/GraphicString.c \
	$(DIR_SRC_ASN1)/IA5String.c \
	$(DIR_SRC_ASN1)/INTEGER.c \
	$(DIR_SRC_ASN1)/ISO646String.c \
	$(DIR_SRC_ASN1)/NativeEnumerated.c \
	$(DIR_SRC_ASN1)/NativeInteger.c \
	$(DIR_SRC_ASN1)/NULL.c \
	$(DIR_SRC_ASN1)/NumericString.c \
	$(DIR_SRC_ASN1)/ObjectDescriptor.c \
	$(DIR_SRC_ASN1)/OBJECT_IDENTIFIER.c \
	$(DIR_SRC_ASN1)/OCTET_STRING.c \
	$(DIR_SRC_ASN1)/per_decoder.c \
	$(DIR_SRC_ASN1)/per_encoder.c \
	$(DIR_SRC_ASN1)/per_opentype.c \
	$(DIR_SRC_ASN1)/per_support.c \
	$(DIR_SRC_ASN1)/PrintableString.c \
	$(DIR_SRC_ASN1)/RELATIVE-OID.c \
	$(DIR_SRC_ASN1)/T61String.c \
	$(DIR_SRC_ASN1)/TeletexString.c \
	$(DIR_SRC_ASN1)/UniversalString.c \
	$(DIR_SRC_ASN1)/UTCTime.c \
	$(DIR_SRC_ASN1)/UTF8String.c \
	$(DIR_SRC_ASN1)/VisibleString.c \
	$(DIR_SRC_ASN1)/xer_decoder.c \
	$(DIR_SRC_ASN1)/xer_encoder.c \
	$(DIR_SRC_ASN1)/xer_support.c

SRC_STRUCT_FILES := \
	$(DIR_SRC_STRUCT)/AccessDescription.c \
	$(DIR_SRC_STRUCT)/Accuracy.c \
	$(DIR_SRC_STRUCT)/AdministrationDomainName.c \
	$(DIR_SRC_STRUCT)/AlgorithmIdentifier.c \
	$(DIR_SRC_STRUCT)/AlgorithmIdentifiers.c \
	$(DIR_SRC_STRUCT)/ATSHashIndexDefault.c \
	$(DIR_SRC_STRUCT)/ATSHashIndexFull.c \
	$(DIR_SRC_STRUCT)/AttCertIssuer.c \
	$(DIR_SRC_STRUCT)/AttCertValidityPeriod.c \
	$(DIR_SRC_STRUCT)/AttCertVersion.c \
	$(DIR_SRC_STRUCT)/AttCertVersionV1.c \
	$(DIR_SRC_STRUCT)/Attribute.c \
	$(DIR_SRC_STRUCT)/AttributeCertificate.c \
	$(DIR_SRC_STRUCT)/AttributeCertificateInfo.c \
	$(DIR_SRC_STRUCT)/AttributeCertificateInfoV1.c \
	$(DIR_SRC_STRUCT)/AttributeCertificateV1.c \
	$(DIR_SRC_STRUCT)/AttributeCertificateV2.c \
	$(DIR_SRC_STRUCT)/Attributes.c \
	$(DIR_SRC_STRUCT)/AttributeType.c \
	$(DIR_SRC_STRUCT)/AttributeTypeAndValue.c \
	$(DIR_SRC_STRUCT)/AttributeValue.c \
	$(DIR_SRC_STRUCT)/AttributeValueAssertion.c \
	$(DIR_SRC_STRUCT)/AuthenticatedSafe.c \
	$(DIR_SRC_STRUCT)/AuthorityInfoAccessSyntax.c \
	$(DIR_SRC_STRUCT)/AuthorityKeyIdentifier.c \
	$(DIR_SRC_STRUCT)/BasicConstraints.c \
	$(DIR_SRC_STRUCT)/BasicOCSPResponse.c \
	$(DIR_SRC_STRUCT)/BinaryField.c \
	$(DIR_SRC_STRUCT)/BuiltInDomainDefinedAttribute.c \
	$(DIR_SRC_STRUCT)/BuiltInDomainDefinedAttributes.c \
	$(DIR_SRC_STRUCT)/BuiltInStandardAttributes.c \
	$(DIR_SRC_STRUCT)/CertBag.c \
	$(DIR_SRC_STRUCT)/CertID.c \
	$(DIR_SRC_STRUCT)/Certificate.c \
	$(DIR_SRC_STRUCT)/CertificateChoices.c \
	$(DIR_SRC_STRUCT)/CertificateList.c \
	$(DIR_SRC_STRUCT)/CertificateLists.c \
	$(DIR_SRC_STRUCT)/CertificatePolicies.c \
	$(DIR_SRC_STRUCT)/Certificates.c \
	$(DIR_SRC_STRUCT)/CertificateSerialNumber.c \
	$(DIR_SRC_STRUCT)/CertificateSet.c \
	$(DIR_SRC_STRUCT)/CertificationRequest.c \
	$(DIR_SRC_STRUCT)/CertificationRequestInfo.c \
	$(DIR_SRC_STRUCT)/CertPolicyId.c \
	$(DIR_SRC_STRUCT)/CertStatus.c \
	$(DIR_SRC_STRUCT)/CMSVersion.c \
	$(DIR_SRC_STRUCT)/CompleteCertificateRefs.c \
	$(DIR_SRC_STRUCT)/CompleteRevocationRefs.c \
	$(DIR_SRC_STRUCT)/ContentEncryptionAlgorithmIdentifier.c \
	$(DIR_SRC_STRUCT)/ContentInfo.c \
	$(DIR_SRC_STRUCT)/ContentType.c \
	$(DIR_SRC_STRUCT)/CountryName.c \
	$(DIR_SRC_STRUCT)/CRLDistributionPoints.c \
	$(DIR_SRC_STRUCT)/CrlID.c \
	$(DIR_SRC_STRUCT)/CrlIdentifier.c \
	$(DIR_SRC_STRUCT)/CRLListID.c \
	$(DIR_SRC_STRUCT)/CRLNumber.c \
	$(DIR_SRC_STRUCT)/CrlOcspRef.c \
	$(DIR_SRC_STRUCT)/CRLReason.c \
	$(DIR_SRC_STRUCT)/CrlValidatedID.c \
	$(DIR_SRC_STRUCT)/Digest.c \
	$(DIR_SRC_STRUCT)/DigestAlgorithmIdentifier.c \
	$(DIR_SRC_STRUCT)/DigestAlgorithmIdentifiers.c \
	$(DIR_SRC_STRUCT)/DigestedData.c \
	$(DIR_SRC_STRUCT)/DigestInfo.c \
	$(DIR_SRC_STRUCT)/DirectoryString.c \
	$(DIR_SRC_STRUCT)/DisplayText.c \
	$(DIR_SRC_STRUCT)/DistributionPoint.c \
	$(DIR_SRC_STRUCT)/DistributionPointName.c \
	$(DIR_SRC_STRUCT)/DSTU4145Params.c \
	$(DIR_SRC_STRUCT)/DSTUEllipticCurve.c \
	$(DIR_SRC_STRUCT)/ECBinary.c \
	$(DIR_SRC_STRUCT)/ECDSA-Sig-Value.c \
	$(DIR_SRC_STRUCT)/ECParameters.c \
	$(DIR_SRC_STRUCT)/ECPrivateKey.c \
	$(DIR_SRC_STRUCT)/EDIPartyName.c \
	$(DIR_SRC_STRUCT)/EncapsulatedContentInfo.c \
	$(DIR_SRC_STRUCT)/EncryptedContent.c \
	$(DIR_SRC_STRUCT)/EncryptedContentInfo.c \
	$(DIR_SRC_STRUCT)/EncryptedData.c \
	$(DIR_SRC_STRUCT)/EncryptedKey.c \
	$(DIR_SRC_STRUCT)/EncryptedPrivateKeyInfo.c \
	$(DIR_SRC_STRUCT)/EnvelopedData.c \
	$(DIR_SRC_STRUCT)/ESSCertIDv2.c \
	$(DIR_SRC_STRUCT)/ESSCertIDv2s.c \
	$(DIR_SRC_STRUCT)/ExtendedCertificate.c \
	$(DIR_SRC_STRUCT)/ExtendedCertificateInfo.c \
	$(DIR_SRC_STRUCT)/ExtendedKeyUsage.c \
	$(DIR_SRC_STRUCT)/Extension.c \
	$(DIR_SRC_STRUCT)/Extensions.c \
	$(DIR_SRC_STRUCT)/FreshestCRL.c \
	$(DIR_SRC_STRUCT)/GeneralName.c \
	$(DIR_SRC_STRUCT)/GeneralNames.c \
	$(DIR_SRC_STRUCT)/GOST28147Params.c \
	$(DIR_SRC_STRUCT)/GOST28147ParamsOptionalDke.c \
	$(DIR_SRC_STRUCT)/Gost34310Params.c \
	$(DIR_SRC_STRUCT)/GOST34310Sign.c \
	$(DIR_SRC_STRUCT)/Hash.c \
	$(DIR_SRC_STRUCT)/Holder.c \
	$(DIR_SRC_STRUCT)/IITParams.c \
	$(DIR_SRC_STRUCT)/Iso4217CurrencyCode.c \
	$(DIR_SRC_STRUCT)/IssuerAltName.c \
	$(DIR_SRC_STRUCT)/IssuerAndSerialNumber.c \
	$(DIR_SRC_STRUCT)/IssuerSerial.c \
	$(DIR_SRC_STRUCT)/KEKIdentifier.c \
	$(DIR_SRC_STRUCT)/KEKRecipientInfo.c \
	$(DIR_SRC_STRUCT)/KepDSTU4145Params.c \
	$(DIR_SRC_STRUCT)/KepGost28147Params.c \
	$(DIR_SRC_STRUCT)/KeyAgreeRecipientIdentifier.c \
	$(DIR_SRC_STRUCT)/KeyAgreeRecipientInfo.c \
	$(DIR_SRC_STRUCT)/KeyBag.c \
	$(DIR_SRC_STRUCT)/KeyDerivationAlgorithmIdentifier.c \
	$(DIR_SRC_STRUCT)/KeyEncryptionAlgorithmIdentifier.c \
	$(DIR_SRC_STRUCT)/KeyHash.c \
	$(DIR_SRC_STRUCT)/KeyIdentifier.c \
	$(DIR_SRC_STRUCT)/KeyPurposeId.c \
	$(DIR_SRC_STRUCT)/KeyTransRecipientInfo.c \
	$(DIR_SRC_STRUCT)/KeyUsage.c \
	$(DIR_SRC_STRUCT)/MacData.c \
	$(DIR_SRC_STRUCT)/MessageAuthenticationCodeAlgorithm.c \
	$(DIR_SRC_STRUCT)/MessageImprint.c \
	$(DIR_SRC_STRUCT)/MonetaryValue.c \
	$(DIR_SRC_STRUCT)/Name.c \
	$(DIR_SRC_STRUCT)/NetworkAddress.c \
	$(DIR_SRC_STRUCT)/NoticeReference.c \
	$(DIR_SRC_STRUCT)/NumericUserIdentifier.c \
	$(DIR_SRC_STRUCT)/ObjectDigestInfo.c \
	$(DIR_SRC_STRUCT)/OcspIdentifier.c \
	$(DIR_SRC_STRUCT)/OcspListID.c \
	$(DIR_SRC_STRUCT)/OCSPRequest.c \
	$(DIR_SRC_STRUCT)/OCSPResponse.c \
	$(DIR_SRC_STRUCT)/OcspResponsesID.c \
	$(DIR_SRC_STRUCT)/OCSPResponseStatus.c \
	$(DIR_SRC_STRUCT)/ORAddress.c \
	$(DIR_SRC_STRUCT)/OrganizationalUnitName.c \
	$(DIR_SRC_STRUCT)/OrganizationalUnitNames.c \
	$(DIR_SRC_STRUCT)/OrganizationName.c \
	$(DIR_SRC_STRUCT)/OriginatorIdentifierOrKey.c \
	$(DIR_SRC_STRUCT)/OriginatorInfo.c \
	$(DIR_SRC_STRUCT)/OriginatorPublicKey.c \
	$(DIR_SRC_STRUCT)/OtherCertID.c \
	$(DIR_SRC_STRUCT)/OtherCertificateFormat.c \
	$(DIR_SRC_STRUCT)/OtherHash.c \
	$(DIR_SRC_STRUCT)/OtherHashAlgAndValue.c \
	$(DIR_SRC_STRUCT)/OtherHashValue.c \
	$(DIR_SRC_STRUCT)/OtherKeyAttribute.c \
	$(DIR_SRC_STRUCT)/OtherName.c \
	$(DIR_SRC_STRUCT)/OtherPrimeInfo.c \
	$(DIR_SRC_STRUCT)/OtherPrimeInfos.c \
	$(DIR_SRC_STRUCT)/OtherRecipientInfo.c \
	$(DIR_SRC_STRUCT)/OtherRevocationInfoFormat.c \
	$(DIR_SRC_STRUCT)/OtherRevRefs.c \
	$(DIR_SRC_STRUCT)/OtherRevRefType.c \
	$(DIR_SRC_STRUCT)/OtherRevVals.c \
	$(DIR_SRC_STRUCT)/OtherRevValType.c \
	$(DIR_SRC_STRUCT)/PasswordRecipientInfo.c \
	$(DIR_SRC_STRUCT)/PBES2-KDFs.c \
	$(DIR_SRC_STRUCT)/PBES2-params.c \
	$(DIR_SRC_STRUCT)/PBKDF2-params.c \
	$(DIR_SRC_STRUCT)/PBKDF2-Salt.c \
	$(DIR_SRC_STRUCT)/Pentanomial.c \
	$(DIR_SRC_STRUCT)/PersonalName.c \
	$(DIR_SRC_STRUCT)/PFX.c \
	$(DIR_SRC_STRUCT)/PKCS8ShroudedKeyBag.c \
	$(DIR_SRC_STRUCT)/PKIFailureInfo.c \
	$(DIR_SRC_STRUCT)/PKIFreeText.c \
	$(DIR_SRC_STRUCT)/PKIStatus.c \
	$(DIR_SRC_STRUCT)/PKIStatusInfo.c \
	$(DIR_SRC_STRUCT)/PKIXTime.c \
	$(DIR_SRC_STRUCT)/PolicyInformation.c \
	$(DIR_SRC_STRUCT)/PolicyInformations.c \
	$(DIR_SRC_STRUCT)/PolicyQualifierId.c \
	$(DIR_SRC_STRUCT)/PolicyQualifierInfo.c \
	$(DIR_SRC_STRUCT)/PolicyQualifiers.c \
	$(DIR_SRC_STRUCT)/PrivateDomainName.c \
	$(DIR_SRC_STRUCT)/PrivateKeyInfo.c \
	$(DIR_SRC_STRUCT)/PrivateKeyUsagePeriod.c \
	$(DIR_SRC_STRUCT)/QcEuLimitValue.c \
	$(DIR_SRC_STRUCT)/QCStatement.c \
	$(DIR_SRC_STRUCT)/QCStatements.c \
	$(DIR_SRC_STRUCT)/RDNSequence.c \
	$(DIR_SRC_STRUCT)/ReasonFlags.c \
	$(DIR_SRC_STRUCT)/RecipientEncryptedKey.c \
	$(DIR_SRC_STRUCT)/RecipientEncryptedKeys.c \
	$(DIR_SRC_STRUCT)/RecipientIdentifier.c \
	$(DIR_SRC_STRUCT)/RecipientInfo.c \
	$(DIR_SRC_STRUCT)/RecipientInfos.c \
	$(DIR_SRC_STRUCT)/RecipientKeyIdentifier.c \
	$(DIR_SRC_STRUCT)/RelativeDistinguishedName.c \
	$(DIR_SRC_STRUCT)/Request.c \
	$(DIR_SRC_STRUCT)/ResponderID.c \
	$(DIR_SRC_STRUCT)/ResponseBytes.c \
	$(DIR_SRC_STRUCT)/ResponseData.c \
	$(DIR_SRC_STRUCT)/RevocationInfoChoice.c \
	$(DIR_SRC_STRUCT)/RevocationInfoChoices.c \
	$(DIR_SRC_STRUCT)/RevocationValues.c \
	$(DIR_SRC_STRUCT)/RevokedCertificate.c \
	$(DIR_SRC_STRUCT)/RevokedCertificates.c \
	$(DIR_SRC_STRUCT)/RevokedInfo.c \
	$(DIR_SRC_STRUCT)/RSAPrivateKey.c \
	$(DIR_SRC_STRUCT)/RSAPublicKey.c \
	$(DIR_SRC_STRUCT)/SafeBag.c \
	$(DIR_SRC_STRUCT)/SafeContents.c \
	$(DIR_SRC_STRUCT)/SecretBag.c \
	$(DIR_SRC_STRUCT)/SeqAttributes.c \
	$(DIR_SRC_STRUCT)/SharedInfo.c \
	$(DIR_SRC_STRUCT)/Signature.c \
	$(DIR_SRC_STRUCT)/SignatureAlgorithmIdentifier.c \
	$(DIR_SRC_STRUCT)/SignaturePolicyId.c \
	$(DIR_SRC_STRUCT)/SignaturePolicyIdentifier.c \
	$(DIR_SRC_STRUCT)/SignedAttributes.c \
	$(DIR_SRC_STRUCT)/SignedData.c \
	$(DIR_SRC_STRUCT)/SignerIdentifier.c \
	$(DIR_SRC_STRUCT)/SignerIdentifierEx.c \
	$(DIR_SRC_STRUCT)/SignerIdentifierIm.c \
	$(DIR_SRC_STRUCT)/SignerInfo.c \
	$(DIR_SRC_STRUCT)/SignerInfos.c \
	$(DIR_SRC_STRUCT)/SigningCertificateV2.c \
	$(DIR_SRC_STRUCT)/SigPolicyHash.c \
	$(DIR_SRC_STRUCT)/SigPolicyId.c \
	$(DIR_SRC_STRUCT)/SigPolicyQualifierId.c \
	$(DIR_SRC_STRUCT)/SigPolicyQualifierInfo.c \
	$(DIR_SRC_STRUCT)/SingleResponse.c \
	$(DIR_SRC_STRUCT)/SPUserNotice.c \
	$(DIR_SRC_STRUCT)/SubjectAltName.c \
	$(DIR_SRC_STRUCT)/SubjectDirectoryAttributes.c \
	$(DIR_SRC_STRUCT)/SubjectInfoAccess.c \
	$(DIR_SRC_STRUCT)/SubjectKeyIdentifier.c \
	$(DIR_SRC_STRUCT)/SubjectPublicKeyInfo.c \
	$(DIR_SRC_STRUCT)/TBSCertificate.c \
	$(DIR_SRC_STRUCT)/TBSCertList.c \
	$(DIR_SRC_STRUCT)/TBSRequest.c \
	$(DIR_SRC_STRUCT)/TerminalIdentifier.c \
	$(DIR_SRC_STRUCT)/TimeStampReq.c \
	$(DIR_SRC_STRUCT)/TimeStampResp.c \
	$(DIR_SRC_STRUCT)/TimeStampToken.c \
	$(DIR_SRC_STRUCT)/TSAPolicyId.c \
	$(DIR_SRC_STRUCT)/TSTInfo.c \
	$(DIR_SRC_STRUCT)/TSVersion.c \
	$(DIR_SRC_STRUCT)/UnauthAttributes.c \
	$(DIR_SRC_STRUCT)/UniqueIdentifier.c \
	$(DIR_SRC_STRUCT)/UnknownInfo.c \
	$(DIR_SRC_STRUCT)/UnprotectedAttributes.c \
	$(DIR_SRC_STRUCT)/UnsignedAttributes.c \
	$(DIR_SRC_STRUCT)/UserKeyingMaterial.c \
	$(DIR_SRC_STRUCT)/V2Form.c \
	$(DIR_SRC_STRUCT)/Validity.c \
	$(DIR_SRC_STRUCT)/Version.c \
	$(DIR_SRC_STRUCT)/X121Address.c \
	$(DIR_SRC_STRUCT)/X509Tbs.c

LOCAL_SRC_FILES := \
	$(SRC_ASN1_FILES) \
	$(SRC_STRUCT_FILES)

include $(BUILD_SHARED_LIBRARY)
